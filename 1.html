<html lang="en">
	<body>
		<div id="count">1</div>
		<button id="openButton">open</button>
		<button id="focusButton">focus</button>
	</body>
	<script>
		function render(window, count) {
			const next = count + 1
			const openButton = window.document.getElementById("openButton");
			const focusButton = window.document.getElementById("focusButton");

			openButton.addEventListener("click", onClickOpen);
			focusButton.addEventListener("click", onClickFocus);

			function onClickOpen() {
				const childWindow = window.open(
					"",
					`${next}`,
					`width=300px,height=300px,left=500px,top=500px`
				);
				childWindow.document.body.innerHTML = `
					<div>${next}</div>
					<button id="openButton">open</button>
					<button id="focusButton">focus</button>
				`;
				render(childWindow, next);
			}

			function onClickFocus() {
				const w = window.open("", `${next}`)
				w.focus();
			}
		}

		render(window, parseInt(document.getElementById("count").innerText));
	</script>
</html>
